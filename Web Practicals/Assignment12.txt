12 . Write a program to implement web service for calculator applications using PHP.


index.html

<!DOCTYPE html>
<html>
<head>
  <title>Simple PHP Calculator</title>
</head>
<body>

  <h2>Simple PHP Calculator</h2>

  <label>First number:</label>
  <input type="number" id="num1"><br><br>

  <label>Operation:</label>
  <select id="operation">
    <option value="add">Add (+)</option>
    <option value="subtract">Subtract (-)</option>
    <option value="multiply">Multiply (×)</option>
    <option value="divide">Divide (÷)</option>
  </select><br><br>

  <label>Second number:</label>
  <input type="number" id="num2"><br><br>

  <button onclick="calculate()">Calculate</button>

  <p id="result"></p>

  <script>
    function calculate() {
      const num1 = document.getElementById("num1").value;
      const num2 = document.getElementById("num2").value;
      const operation = document.getElementById("operation").value;

      if (num1 === "" || num2 === "") {
        document.getElementById("result").innerText = "Please enter both numbers.";
        return;
      }

      // Use backticks for dynamic URL
      const url = `calculator.php?operation=${operation}&num1=${num1}&num2=${num2}`;

      fetch(url)
        .then(res => res.json())
        .then(data => {
          if (data.error) {
            document.getElementById("result").innerText = "Error: " + data.error;
          } else {
            document.getElementById("result").innerText =
              `Result: ${data.num1} ${getSymbol(operation)} ${data.num2} = ${data.result}`;
          }
        })
        .catch(() => {
          document.getElementById("result").innerText = "Server error.";
        });
    }

    function getSymbol(op) {
      if (op === "add") return "+";
      if (op === "subtract") return "-";
      if (op === "multiply") return "×";
      if (op === "divide") return "÷";
    }
  </script>

</body>
</html>

------------------------------------------------------------------------------------------------------------------

calculator.php

<?php
    header("Content-Type: application/json");

    // Get parameters from the request
    $operation = isset($_GET['operation']) ? $_GET['operation'] : '';
    $num1 = isset($_GET['num1']) ? floatval($_GET['num1']) : null;
    $num2 = isset($_GET['num2']) ? floatval($_GET['num2']) : null;

    // Validate input
    if ($num1 === null || $num2 === null || $operation === '')
    {
        echo json_encode(["error" => "Missing or invalid parameters"]);
        exit;
    }

    // Perform calculation
    switch ($operation)
    {
        case 'add':
            $result = $num1 + $num2;
            break;
        case 'subtract':
            $result = $num1 - $num2;
            break;
        case 'multiply':
            $result = $num1 * $num2;
            break;
            
        case 'divide':
            if ($num2 == 0) {
                echo json_encode(["error" => "Division by zero"]);
                exit;
            }
            $result = $num1 / $num2;
            break;
        default:
            echo json_encode(["error" => "Unsupported operation"]);
            exit;
    }
    echo json_encode([
        "operation" => $operation,
        "num1" => $num1,
        "num2" => $num2,
        "result" => $result
    ]);

    
?>



